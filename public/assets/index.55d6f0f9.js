var O=Object.defineProperty,P=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var M=(e,t,o)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,_=(e,t)=>{for(var o in t||(t={}))A.call(t,o)&&M(e,o,t[o]);if(L)for(var o of L(t))H.call(t,o)&&M(e,o,t[o]);return e},y=(e,t)=>P(e,q(t));import{o as d,c,a,F as S,r as b,t as i,b as k,p as T,d as U,e as h,n as W,w,v as C,f as m,g as x,h as p,m as N,i as F,j as D,k as V,s as j,l as G,q as z,u as Y,x as K}from"./vendor.feddef56.js";const J=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}};J();var g=(e,t)=>{const o=e.__vccOpts||e;for(const[r,s]of t)o[r]=s;return o};const Q={name:"Forecast",props:{forecast:Array},methods:{calcTemp(e){return Math.round(Number(e)-273.15)}}},R=e=>(T("data-v-16a9242c"),e=e(),U(),e),X={class:"forecast"},Z=k(" \xA0 5 day forecast "),ee=R(()=>a("hr",null,null,-1)),te={key:"day.dt"},se={key:"day.dt"},oe={key:"day.dt"};function ae(e,t,o,r,s,n){return d(),c("div",X,[Z,ee,a("table",null,[a("tr",null,[(d(!0),c(S,null,b(o.forecast,l=>(d(),c("th",te,i(l.day),1))),128))]),a("tr",null,[(d(!0),c(S,null,b(o.forecast,l=>(d(),c("td",se,i(n.calcTemp(l.main.temp)),1))),128))]),a("tr",null,[(d(!0),c(S,null,b(o.forecast,l=>(d(),c("td",oe,i(l.weather[0].main),1))),128))])])])}var ne=g(Q,[["render",ae],["__scopeId","data-v-16a9242c"]]);const re={name:"WeatherCard",components:{Forecast:ne},data(){return{weather:{},showForecast:!1}},methods:{calcTemp(e){return Math.round(Number(e)-273.15)},calcWindSpeed(e){return Math.round(e*3.6*10)/10},getIconUrl(e){return`http://openweathermap.org/img/w/${e}.png`},calcWindDirection(e){var t=Math.floor(e/22.5+.5),o=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];return o[t%16]},toggleShowForecast(){this.weather.forecast||this.fetchForecast().catch(e=>console.log(e)),this.showForecast=!this.showForecast},async fetchWeather(){try{const e=await h.get("https://api.openweathermap.org/data/2.5/weather/?q=gudovac&appid=524464013431281f7aabe3e488765d52");this.weather=await e.data}catch(e){console.log(e)}},async fetchForecast(){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=[];try{const r=await(await h.get("https://api.openweathermap.org/data/2.5/forecast/?q=gudovac&appid=524464013431281f7aabe3e488765d52")).data;if(typeof r!="undefined"){for(let s=7;s<=r.list.length;s+=8){let n=new Date(r.list[s].dt_txt);r.list[s].day=e[n.getDay()],t.push(r.list[s])}this.weather.forecast=t}else throw"problem with fetching forecast"}catch(o){console.log(o)}}},created(){this.fetchWeather()}},I=e=>(T("data-v-382b080d"),e=e(),U(),e),le={key:0,class:"card"},de={class:"header-left"},ce={class:"header-right"},ie=["src"],ue=I(()=>a("div",{style:{clear:"both"}},null,-1)),he={class:"weather-main"},_e={class:"main-temp"},me={class:"main-right"},pe=I(()=>a("br",null,null,-1)),fe=I(()=>a("br",null,null,-1)),ge=I(()=>a("br",null,null,-1)),ve=I(()=>a("div",{style:{clear:"both"}},null,-1));function we(e,t,o,r,s,n){const l=p("forecast");return s.weather.name?(d(),c("div",le,[a("div",de,[a("b",null,i(s.weather.name),1),k(" , "+i(s.weather.weather[0].description),1)]),a("div",ce,[a("img",{src:n.getIconUrl(s.weather.weather[0].icon),alt:""},null,8,ie)]),ue,a("div",he,[a("div",_e,i(n.calcTemp(s.weather.main.temp))+"\xB0",1),a("div",me,[k(" Feels Like: "+i(n.calcTemp(s.weather.main.feels_like))+" \xB0C ",1),pe,k(" Pressure:"+i(s.weather.main.pressure)+" hPa ",1),fe,k(" Humidity: "+i(s.weather.main.humidity)+" % ",1),ge,k(" Wind: "+i(n.calcWindSpeed(s.weather.wind.speed))+" km/h, "+i(n.calcWindDirection(s.weather.wind.deg)),1)])]),a("div",{class:"show-forecast-btn",onClick:t[0]||(t[0]=(...f)=>n.toggleShowForecast&&n.toggleShowForecast(...f))},[a("div",{class:W(s.showForecast?"forecast-icon-minus":"forecast-icon")},null,2)]),ve,w(m(l,{forecast:s.weather.forecast},null,8,["forecast"]),[[C,s.showForecast]])])):x("",!0)}var ye=g(re,[["render",we],["__scopeId","data-v-382b080d"]]);const Se={props:{text:String}};function ke(e,t,o,r,s,n){return d(),c("div",{class:"glow-on-hover",onClick:t[0]||(t[0]=l=>l.target.classList.toggle("active"))},i(o.text),1)}var B=g(Se,[["render",ke],["__scopeId","data-v-2dbac0e2"]]);const xe={name:"Schedule",components:{ButtonGlow:B},data(){return{show:!1,editableId:null,oldText:""}},computed:_({},N(["getSchedule","getUsername"])),methods:y(_({},F(["deleteFromSchedule","editNote"])),{editInSchedule(e){const t=document.getElementById(e);t.contentEditable=!0,t.classList.add("note-text-edit"),this.editableId=e,this.oldText=t.innerHTML},save(e){const t=document.getElementById(e),o=t.innerHTML.replace(/\u00a0/g," ");t.contentEditable=!1,t.classList.remove("note-text-edit"),this.editableId=null,this.oldText="";try{this.editNote({id:e,text:o})}catch(r){console.log(r)}},cancel(e){const t=document.getElementById(e);t.innerHTML=this.oldText,t.contentEditable=!1,t.classList.remove("note-text-edit"),this.editableId=null,this.oldText=""}})},be={class:"schedule"},Ie={class:"day"},$e={class:"day-date"},Ce={class:"note"},Fe={class:"note-header"},Ee={class:"note-username"},Te={class:"note-icons"},Ue=["onClick"],We=["onClick"],Ne=["onClick"],De=["onClick"],Le=["id"];function Me(e,t,o,r,s,n){const l=p("button-glow");return d(),c("div",be,[m(l,{text:s.show?"Hide Schedule":"Show Schedule",onClick:t[0]||(t[0]=f=>s.show=!s.show)},null,8,["text"]),a("div",{class:W(["notes",{"notes-show":s.show}])},[(d(!0),c(S,null,b(e.getSchedule,(f,v)=>(d(),c("div",Ie,[a("div",$e,i(new Date(v).getDate())+". "+i(new Date(v).getMonth()+1)+". "+i(new Date(v).getFullYear())+". ",1),(d(!0),c(S,null,b(f,u=>(d(),c("div",Ce,[a("div",Fe,[a("span",Ee,i(u.username)+" :",1),a("span",Te,[e.getUsername===u.username&&s.editableId===u._id?(d(),c("i",{key:0,onClick:E=>n.save(u._id),class:"fa fa-save"},null,8,Ue)):x("",!0),e.getUsername===u.username&&s.editableId===u._id?(d(),c("i",{key:1,onClick:E=>n.cancel(u._id),class:"fa fa-times"},null,8,We)):x("",!0),e.getUsername===u.username&&s.editableId!=u._id?(d(),c("i",{key:2,onClick:E=>n.editInSchedule(u._id),class:"fa fa-edit"},null,8,Ne)):x("",!0),e.getUsername===u.username?(d(),c("i",{key:3,onClick:E=>e.deleteFromSchedule(u._id),class:"fa fa-trash"},null,8,De)):x("",!0)])]),a("span",{class:"note-text",id:u._id},i(u.text.replace(/Â /g," ")),9,Le)]))),256))]))),256))],2)])}var Ve=g(xe,[["render",Me],["__scopeId","data-v-41920343"]]);const Be={data(){return{text:""}},props:{date:Date},methods:y(_({},F(["addToSchedule"])),{save(e){this.text!=""&&(this.addToSchedule({date:this.date,text:this.text}),this.text="",this.$emit("close-form"))}})},Oe={class:"input"},Pe={action:""},qe={key:0,class:"form-date"};function Ae(e,t,o,r,s,n){return d(),c("div",Oe,[a("form",Pe,[o.date?(d(),c("div",qe,i(String(o.date.getDate()).padStart(2,"0"))+" "+i(String(o.date.getMonth()+1).padStart(2,"0"))+" "+i(o.date.getFullYear()),1)):x("",!0),w(a("textarea",{name:"form-text","onUpdate:modelValue":t[0]||(t[0]=l=>s.text=l),class:"form-text"},null,512),[[D,s.text]]),a("button",{class:"form-btn",onClick:t[1]||(t[1]=V(l=>n.save(),["prevent"]))},"Save"),a("button",{onClick:t[2]||(t[2]=V(l=>e.$emit("close-form"),["prevent"]))},"Close")])])}var He=g(Be,[["render",Ae],["__scopeId","data-v-a7de75d8"]]);const je={components:{DatePicker:j,ScheduleInputForm:He,ButtonGlow:B},data(){return{date:null,showCalendar:!1}},computed:_({},N(["getUsername"])),watch:{showCalendar:function(e){e||(this.date=null)}}},Ge={class:"calendar"};function ze(e,t,o,r,s,n){const l=p("DatePicker",!0),f=p("button-glow"),v=p("ScheduleInputForm");return d(),c(S,null,[w(a("div",Ge,[a("div",{class:W(["date-picker-container",{"date-picker-show":s.showCalendar}])},[m(l,{modelValue:s.date,"onUpdate:modelValue":t[0]||(t[0]=u=>s.date=u),class:"date-picker",color:"blue","is-dark":""},null,8,["modelValue"])],2),m(f,{onClick:t[1]||(t[1]=u=>s.showCalendar=!s.showCalendar),text:s.showCalendar?"Close Calendar":"Show Calendar"},null,8,["text"])],512),[[C,e.getUsername!=""]]),m(v,{date:s.date,style:G(s.date?"transform: scale(1)":"transform: scale(0)"),onCloseForm:t[2]||(t[2]=u=>s.date=null)},null,8,["date","style"])],64)}var Ye=g(je,[["render",ze],["__scopeId","data-v-f9549be6"]]);const Ke={name:"Login",data(){return{username:"user",password:"user"}},computed:_({},N(["getUsername"])),methods:y(_({},F(["login","logout"])),{async loginForm(e){e.preventDefault();const t=document.getElementById("username"),o=document.getElementById("password");try{await this.login({username:this.username,password:this.password})}catch(r){t.setCustomValidity(r.request.response),t.reportValidity(),t.setCustomValidity(""),o.setCustomValidity("")}}})},Je=e=>(T("data-v-8e88c40e"),e=e(),U(),e),Qe={class:"login"},Re=Je(()=>a("button",{type:"submit"},"log in",-1)),Xe={class:"user"};function Ze(e,t,o,r,s,n){return d(),c("div",Qe,[w(a("form",{onSubmit:t[2]||(t[2]=(...l)=>n.loginForm&&n.loginForm(...l))},[w(a("input",{type:"text",name:"username",id:"username",required:"","onUpdate:modelValue":t[0]||(t[0]=l=>s.username=l),placeholder:"username"},null,512),[[D,s.username]]),w(a("input",{type:"text",name:"password",id:"password",required:"","onUpdate:modelValue":t[1]||(t[1]=l=>s.password=l),placeholder:"password"},null,512),[[D,s.password]]),Re],544),[[C,e.getUsername===""]]),w(a("div",Xe,[a("p",null,i(e.getUsername),1),a("button",{onClick:t[3]||(t[3]=(...l)=>e.logout&&e.logout(...l))},"Log Out")],512),[[C,e.getUsername!=""]])])}var et=g(Ke,[["render",Ze],["__scopeId","data-v-8e88c40e"]]);const tt={components:{WeatherCard:ye,DatePicker:Ye,Schedule:Ve,Login:et},methods:_(_({},F(["fetchSchedule"])),z(["setUsername"])),created(){this.fetchSchedule();const e=localStorage.getItem("x-auth-token"),t=localStorage.getItem("username");e&&t&&(this.setUsername(t),h.defaults.headers.post["x-auth-token"]=e,h.defaults.headers.delete["x-auth-token"]=e,h.defaults.headers.put["x-auth-token"]=e)}},st={class:"container"},ot={class:"showcase"},at={class:"datepicker-container"},nt={class:"weather-container"},rt=a("div",{class:"welcome"},[a("h1",null,"house web")],-1),lt={class:"schedule-container"};function dt(e,t,o,r,s,n){const l=p("login"),f=p("date-picker"),v=p("WeatherCard"),u=p("Schedule");return d(),c("div",st,[m(l),a("div",ot,[a("div",at,[m(f)]),a("div",nt,[rt,m(v)]),a("div",lt,[m(u)])])])}var ct=g(tt,[["render",dt]]);const it="http://houseweb.herokuapp.com/";var $={host:it},ut=Y({state:{schedule:{},username:""},getters:{getSchedule:e=>e.schedule,getScheduleById:e=>t=>{let o=null;return Object.entries(e.schedule).forEach(([r,s])=>{s.forEach(n=>{n._id===t&&(o=n)})}),o},getUsername:e=>e.username},actions:{async fetchSchedule({commit:e}){try{const t=await h.get(`${$.host}api/schedule`);e("addSchedule",t.data)}catch(t){console.log(t)}},async addToSchedule({commit:e},t){try{t.date.setHours(0,0,0,0);const o=y(_({},t),{username:this.state.username}),r=await h.post(`${$.host}api/schedule`,o);e("addToSchedule",r.data)}catch(o){console.log("addToSchedule Error -> "+o)}},async editNote({commit:e},t){try{const o=await h.put(`${$.host}api/schedule`,t)}catch(o){console.log("editSchedule Error -> "+o)}},async deleteFromSchedule({commit:e},t){if(confirm("are you shure?"))try{const o=await h.delete(`${$.host}api/schedule/${t}`);e("deleteFromSchedule",t)}catch(o){console.log(`deleteFromSchedule error -> ${o}`)}},async login({commit:e},t){try{const o=await h.post(`${$.host}api/auth`,t);console.log(`user ${o.data.username} is logged in`),e("setUsername",o.data.username);const r=o.headers["x-auth-token"];localStorage.setItem("x-auth-token",r),localStorage.setItem("username",o.data.username),h.defaults.headers.post["x-auth-token"]=r,h.defaults.headers.delete["x-auth-token"]=r,h.defaults.headers.put["x-auth-token"]=r}catch(o){if(o.request!=null)throw o;console.log(o)}},logout({commit:e}){e("setUsername",""),localStorage.removeItem("x-auth-token"),delete h.defaults.headers.post["x-auth-token"],delete h.defaults.headers.delete["x-auth-token"]}},mutations:{addSchedule(e,t){const o=(r,s)=>r.reduce((n,l)=>y(_({},n),{[l[s]]:[...n[l[s]]||[],l]}),{});e.schedule=o(t,"date")},addToSchedule(e,t){Object.keys(e.schedule).includes(t.date)?e.schedule[t.date].push(t):e.schedule[t.date]=[t]},setUsername(e,t){e.username=t},editSchedule(e,t){let o=this.getScheduleById(t.id);o.text=t.tex},deleteFromSchedule(e,t){Object.entries(e.schedule).forEach(([o,r])=>{r.forEach(s=>{s._id===t&&(e.schedule[o].splice(r.indexOf(s),1),e.schedule[o].length===0&&delete e.schedule[o])})})}}});K(ct).use(ut).mount("#app");
