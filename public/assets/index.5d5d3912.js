var P=Object.defineProperty,q=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var M=(e,t,s)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_=(e,t)=>{for(var s in t||(t={}))A.call(t,s)&&M(e,s,t[s]);if(L)for(var s of L(t))H.call(t,s)&&M(e,s,t[s]);return e},x=(e,t)=>q(e,O(t));import{o as d,c,a,F as y,r as I,t as u,b as S,p as U,d as T,e as h,n as W,w,v as C,f as m,g as k,h as p,m as N,i as F,j as D,k as V,s as j,l as G,q as z,u as Y,x as K}from"./vendor.feddef56.js";const J=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}};J();var g=(e,t)=>{const s=e.__vccOpts||e;for(const[r,o]of t)s[r]=o;return s};const Q={name:"Forecast",props:{forecast:Array},methods:{calcTemp(e){return Math.round(Number(e)-273.15)}}},R=e=>(U("data-v-16a9242c"),e=e(),T(),e),X={class:"forecast"},Z=S(" \xA0 5 day forecast "),ee=R(()=>a("hr",null,null,-1)),te={key:"day.dt"},se={key:"day.dt"},oe={key:"day.dt"};function ae(e,t,s,r,o,n){return d(),c("div",X,[Z,ee,a("table",null,[a("tr",null,[(d(!0),c(y,null,I(s.forecast,l=>(d(),c("th",te,u(l.day),1))),128))]),a("tr",null,[(d(!0),c(y,null,I(s.forecast,l=>(d(),c("td",se,u(n.calcTemp(l.main.temp)),1))),128))]),a("tr",null,[(d(!0),c(y,null,I(s.forecast,l=>(d(),c("td",oe,u(l.weather[0].main),1))),128))])])])}var ne=g(Q,[["render",ae],["__scopeId","data-v-16a9242c"]]);const re={name:"WeatherCard",components:{Forecast:ne},data(){return{weather:{},showForecast:!1}},methods:{calcTemp(e){return Math.round(Number(e)-273.15)},calcWindSpeed(e){return Math.round(e*3.6*10)/10},getIconUrl(e){return`http://openweathermap.org/img/w/${e}.png`},calcWindDirection(e){var t=Math.floor(e/22.5+.5),s=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];return s[t%16]},toggleShowForecast(){this.weather.forecast||this.fetchForecast().catch(e=>console.log(e)),this.showForecast=!this.showForecast},async fetchWeather(){try{const e=await h.get("https://api.openweathermap.org/data/2.5/weather/?q=gudovac&appid=524464013431281f7aabe3e488765d52");this.weather=await e.data}catch(e){console.log(e)}},async fetchForecast(){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=[];try{const r=await(await h.get("https://api.openweathermap.org/data/2.5/forecast/?q=gudovac&appid=524464013431281f7aabe3e488765d52")).data;if(typeof r!="undefined"){for(let o=7;o<=r.list.length;o+=8){let n=new Date(r.list[o].dt_txt);r.list[o].day=e[n.getDay()],t.push(r.list[o])}this.weather.forecast=t}else throw"problem with fetching forecast"}catch(s){console.log(s)}}},created(){this.fetchWeather()}},b=e=>(U("data-v-382b080d"),e=e(),T(),e),le={key:0,class:"card"},de={class:"header-left"},ce={class:"header-right"},ie=["src"],ue=b(()=>a("div",{style:{clear:"both"}},null,-1)),he={class:"weather-main"},_e={class:"main-temp"},me={class:"main-right"},pe=b(()=>a("br",null,null,-1)),fe=b(()=>a("br",null,null,-1)),ge=b(()=>a("br",null,null,-1)),ve=b(()=>a("div",{style:{clear:"both"}},null,-1));function we(e,t,s,r,o,n){const l=p("forecast");return o.weather.name?(d(),c("div",le,[a("div",de,[a("b",null,u(o.weather.name),1),S(" , "+u(o.weather.weather[0].description),1)]),a("div",ce,[a("img",{src:n.getIconUrl(o.weather.weather[0].icon),alt:""},null,8,ie)]),ue,a("div",he,[a("div",_e,u(n.calcTemp(o.weather.main.temp))+"\xB0",1),a("div",me,[S(" Feels Like: "+u(n.calcTemp(o.weather.main.feels_like))+" \xB0C ",1),pe,S(" Pressure:"+u(o.weather.main.pressure)+" hPa ",1),fe,S(" Humidity: "+u(o.weather.main.humidity)+" % ",1),ge,S(" Wind: "+u(n.calcWindSpeed(o.weather.wind.speed))+" km/h, "+u(n.calcWindDirection(o.weather.wind.deg)),1)])]),a("div",{class:"show-forecast-btn",onClick:t[0]||(t[0]=(...f)=>n.toggleShowForecast&&n.toggleShowForecast(...f))},[a("div",{class:W(o.showForecast?"forecast-icon-minus":"forecast-icon")},null,2)]),ve,w(m(l,{forecast:o.weather.forecast},null,8,["forecast"]),[[C,o.showForecast]])])):k("",!0)}var ye=g(re,[["render",we],["__scopeId","data-v-382b080d"]]);const Se={props:{text:String},methods:{clicked(e){console.log(e)}}};function ke(e,t,s,r,o,n){return d(),c("div",{class:"glow-on-hover",onClick:t[0]||(t[0]=l=>l.target.classList.toggle("active"))},u(s.text),1)}var B=g(Se,[["render",ke],["__scopeId","data-v-32a12760"]]);const xe={name:"Schedule",components:{ButtonGlow:B},data(){return{show:!1,editableId:null,oldText:""}},computed:_({},N(["getSchedule","getUsername"])),methods:x(_({},F(["deleteFromSchedule","editNote"])),{editInSchedule(e){const t=document.getElementById(e);t.contentEditable=!0,t.classList.add("note-text-edit"),this.editableId=e,this.oldText=t.innerHTML},save(e){const t=document.getElementById(e),s=t.innerHTML.replace(/\u00a0/g," ");t.contentEditable=!1,t.classList.remove("note-text-edit"),this.editableId=null,this.oldText="";try{this.editNote({id:e,text:s})}catch(r){console.log(r)}},cancel(e){const t=document.getElementById(e);t.innerHTML=this.oldText,t.contentEditable=!1,t.classList.remove("note-text-edit"),this.editableId=null,this.oldText=""}})},Ie={class:"schedule"},be={class:"day"},$e={class:"day-date"},Ce={class:"note"},Fe={class:"note-header"},Ee={class:"note-username"},Ue={class:"note-icons"},Te=["onClick"],We=["onClick"],Ne=["onClick"],De=["onClick"],Le=["id"];function Me(e,t,s,r,o,n){const l=p("button-glow");return d(),c("div",Ie,[m(l,{text:o.show?"Hide Schedule":"Show Schedule",onClick:t[0]||(t[0]=f=>o.show=!o.show)},null,8,["text"]),a("div",{class:W(["notes",{"notes-show":o.show}])},[(d(!0),c(y,null,I(e.getSchedule,(f,v)=>(d(),c("div",be,[a("div",$e,u(new Date(v).getDate())+". "+u(new Date(v).getMonth()+1)+". "+u(new Date(v).getFullYear())+". ",1),(d(!0),c(y,null,I(f,i=>(d(),c("div",Ce,[a("div",Fe,[a("span",Ee,u(i.username)+" :",1),a("span",Ue,[e.getUsername===i.username&&o.editableId===i.id?(d(),c("i",{key:0,onClick:E=>n.save(i.id),class:"fa fa-save"},null,8,Te)):k("",!0),e.getUsername===i.username&&o.editableId===i.id?(d(),c("i",{key:1,onClick:E=>n.cancel(i.id),class:"fa fa-times"},null,8,We)):k("",!0),e.getUsername===i.username&&o.editableId!=i.id?(d(),c("i",{key:2,onClick:E=>n.editInSchedule(i.id),class:"fa fa-edit"},null,8,Ne)):k("",!0),e.getUsername===i.username?(d(),c("i",{key:3,onClick:E=>e.deleteFromSchedule(i.id),class:"fa fa-trash"},null,8,De)):k("",!0)])]),a("span",{class:"note-text",id:i.id},u(i.text.replace(/Â /g," ")),9,Le)]))),256))]))),256))],2)])}var Ve=g(xe,[["render",Me],["__scopeId","data-v-ca463128"]]);const Be={data(){return{text:""}},props:{date:Date},methods:x(_({},F(["addToSchedule"])),{save(e){this.text!=""&&(this.addToSchedule({date:this.date,text:this.text}),this.text="",this.$emit("close-form"))}})},Pe={class:"input"},qe={action:""},Oe={key:0,class:"form-date"};function Ae(e,t,s,r,o,n){return d(),c("div",Pe,[a("form",qe,[s.date?(d(),c("div",Oe,u(String(s.date.getDate()).padStart(2,"0"))+" "+u(String(s.date.getMonth()+1).padStart(2,"0"))+" "+u(s.date.getFullYear()),1)):k("",!0),w(a("textarea",{name:"form-text","onUpdate:modelValue":t[0]||(t[0]=l=>o.text=l),class:"form-text"},null,512),[[D,o.text]]),a("button",{class:"form-btn",onClick:t[1]||(t[1]=V(l=>n.save(),["prevent"]))},"Save"),a("button",{onClick:t[2]||(t[2]=V(l=>e.$emit("close-form"),["prevent"]))},"Close")])])}var He=g(Be,[["render",Ae],["__scopeId","data-v-a7de75d8"]]);const je={components:{DatePicker:j,ScheduleInputForm:He,ButtonGlow:B},data(){return{date:null,showCalendar:!1}},computed:_({},N(["getUsername"])),watch:{showCalendar:function(e){e||(this.date=null)}}},Ge={class:"calendar"};function ze(e,t,s,r,o,n){const l=p("DatePicker",!0),f=p("button-glow"),v=p("ScheduleInputForm");return d(),c(y,null,[w(a("div",Ge,[a("div",{class:W(["date-picker-container",{"date-picker-show":o.showCalendar}])},[a("div",{class:"date-picker-close",onClick:t[0]||(t[0]=i=>o.showCalendar=!1)}),m(l,{modelValue:o.date,"onUpdate:modelValue":t[1]||(t[1]=i=>o.date=i),class:"date-picker"},null,8,["modelValue"])],2),m(f,{onClick:t[2]||(t[2]=i=>o.showCalendar=!o.showCalendar),text:o.showCalendar?"Close Calendar":"Show Calendar"},null,8,["text"])],512),[[C,e.getUsername!=""]]),m(v,{date:o.date,style:G(o.date?"transform: scale(1)":"transform: scale(0)"),onCloseForm:t[3]||(t[3]=i=>o.date=null)},null,8,["date","style"])],64)}var Ye=g(je,[["render",ze],["__scopeId","data-v-3ac270eb"]]);const Ke={name:"Login",data(){return{username:"user",password:"user"}},computed:_({},N(["getUsername"])),methods:x(_({},F(["login","logout"])),{async loginForm(e){e.preventDefault();const t=document.getElementById("username"),s=document.getElementById("password");try{await this.login({username:this.username,password:this.password})}catch(r){t.setCustomValidity(r.request.response),t.reportValidity(),t.setCustomValidity(""),s.setCustomValidity("")}}})},Je=e=>(U("data-v-7ad52d44"),e=e(),T(),e),Qe={class:"login"},Re=Je(()=>a("button",{type:"submit"},"log in",-1)),Xe={class:"user"};function Ze(e,t,s,r,o,n){return d(),c("div",Qe,[w(a("form",{onSubmit:t[2]||(t[2]=(...l)=>n.loginForm&&n.loginForm(...l))},[w(a("input",{type:"text",name:"username",id:"username",required:"","onUpdate:modelValue":t[0]||(t[0]=l=>o.username=l),placeholder:"username"},null,512),[[D,o.username]]),w(a("input",{type:"text",name:"password",id:"password",required:"","onUpdate:modelValue":t[1]||(t[1]=l=>o.password=l),placeholder:"password"},null,512),[[D,o.password]]),Re],544),[[C,e.getUsername===""]]),w(a("div",Xe,[a("p",null,u(e.getUsername),1),a("button",{onClick:t[3]||(t[3]=(...l)=>e.logout&&e.logout(...l))},"Log Out")],512),[[C,e.getUsername!=""]])])}var et=g(Ke,[["render",Ze],["__scopeId","data-v-7ad52d44"]]);const tt={components:{WeatherCard:ye,DatePicker:Ye,Schedule:Ve,Login:et},methods:_(_({},F(["fetchSchedule"])),z(["setUsername"])),created(){this.fetchSchedule();const e=localStorage.getItem("x-auth-token"),t=localStorage.getItem("username");e&&t&&(this.setUsername(t),h.defaults.headers.post["x-auth-token"]=e,h.defaults.headers.delete["x-auth-token"]=e,h.defaults.headers.put["x-auth-token"]=e)}},st={class:"container"},ot={class:"showcase"},at={class:"datepicker-container"},nt={class:"weather-container"},rt=a("div",{class:"welcome"},[a("h1",null,"house web")],-1),lt={class:"schedule-container"};function dt(e,t,s,r,o,n){const l=p("login"),f=p("date-picker"),v=p("WeatherCard"),i=p("Schedule");return d(),c("div",st,[m(l),a("div",ot,[a("div",at,[m(f)]),a("div",nt,[rt,m(v)]),a("div",lt,[m(i)])])])}var ct=g(tt,[["render",dt]]);const it="https://houseweb.herokuapp.com/";var $={host:it},ut=Y({state:{schedule:{},username:"",showInputForm:!1,inputFormEditId:null,showCalendar:!1},getters:{getSchedule:e=>e.schedule,getScheduleById:e=>t=>{let s=null;return Object.entries(e.schedule).forEach(([r,o])=>{o.forEach(n=>{n.id===t&&(s=n)})}),s},getUsername:e=>e.username},actions:{async fetchSchedule({commit:e}){try{const t=await h.get(`${$.host}api/schedule`);e("addSchedule",t.data)}catch(t){console.log(t)}},async addToSchedule({commit:e},t){try{t.date.setHours(0,0,0,0);const s=x(_({},t),{username:this.state.username}),r=await h.post(`${$.host}api/schedule`,s);e("addSchedule",r.data)}catch(s){console.log("addToSchedule Error -> "+s)}},async editNote({commit:e},t){try{const s=await h.put(`${$.host}api/schedule`,t)}catch(s){console.log("editSchedule Error -> "+s)}},async deleteFromSchedule({commit:e},t){if(console.log(`deleteFromSchedule:${t}`),confirm("are you shure?"))try{const s=await h.delete(`${$.host}api/schedule/${t}`);e("addSchedule",s.data)}catch(s){console.log(`deleteFromSchedule error -> ${s}`)}},async login({commit:e},t){try{const s=await h.post(`${$.host}api/auth`,t);console.log(`user ${s.data.username} is logged in`),e("setUsername",s.data.username);const r=s.headers["x-auth-token"];localStorage.setItem("x-auth-token",r),localStorage.setItem("username",s.data.username),h.defaults.headers.post["x-auth-token"]=r,h.defaults.headers.delete["x-auth-token"]=r,h.defaults.headers.put["x-auth-token"]=r}catch(s){if(s.request!=null)throw s;console.log(s)}},logout({commit:e}){e("setUsername",""),localStorage.removeItem("x-auth-token"),delete h.defaults.headers.post["x-auth-token"],delete h.defaults.headers.delete["x-auth-token"]}},mutations:{addSchedule(e,t){for(let s in t)for(let r in t[s])t[s][r].date=new Date(t[s][r].date);e.schedule=t},setUsername(e,t){e.username=t},editSchedule(e,t){let s=this.getScheduleById(t.id);s.text=t.tex}}});K(ct).use(ut).mount("#app");
